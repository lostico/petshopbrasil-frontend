<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">
        <div class="pet-avatar" [style.background-color]="getPetAvatarColor(pet.species)">
          <span>{{ getPetAvatar(pet) }}</span>
        </div>
        <div class="title-info">
          <h2>{{ pet.name }}</h2>
          <p>{{ getSpeciesLabel(pet.species) }}</p>
        </div>
      </div>
      <button class="btn-close" (click)="onClose()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

    <div class="modal-body">
      <div class="pet-info-grid">
        <!-- Status -->
        <div class="info-section">
          <h3>Status</h3>
          <div class="status-badge" [style.background-color]="getStatusColor(pet.status)">
            {{ getStatusLabel(pet.status) }}
          </div>
        </div>

        <!-- Basic Info -->
        <div class="info-section">
          <h3>Informações Básicas</h3>
          <div class="info-list">
            @if (pet.breed) {
              <div class="info-item">
                <span class="label">Raça:</span>
                <span class="value">{{ pet.breed }}</span>
              </div>
            }
            @if (pet.gender) {
              <div class="info-item">
                <span class="label">Gênero:</span>
                <span class="value">{{ getGenderLabel(pet.gender) }}</span>
              </div>
            }
            @if (pet.birthDate) {
              <div class="info-item">
                <span class="label">Idade:</span>
                <span class="value">{{ getAge(pet.birthDate) }}</span>
              </div>
            }
            @if (pet.weight) {
              <div class="info-item">
                <span class="label">Peso:</span>
                <span class="value">{{ pet.weight }}kg</span>
              </div>
            }
            @if (pet.color) {
              <div class="info-item">
                <span class="label">Cor:</span>
                <span class="value">{{ pet.color }}</span>
              </div>
            }
            @if (pet.microchip) {
              <div class="info-item">
                <span class="label">Microchip:</span>
                <span class="value">{{ pet.microchip }}</span>
              </div>
            }
          </div>
        </div>

        <!-- Owner Info -->
        @if (pet.tutor) {
          <div class="info-section">
            <h3>Informações do Tutor</h3>
            <div class="owner-card">
              <div class="owner-header">
                <div class="owner-avatar">
                  <span>{{ pet.tutor.name.charAt(0).toUpperCase() }}</span>
                </div>
                <div class="owner-info">
                  <h4>{{ pet.tutor.name }}</h4>
                  <p>{{ formatCPF(pet.tutor.cpf) }}</p>
                </div>
              </div>
              @if (pet.tutor.phone) {
                <div class="owner-contact">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                  </svg>
                  <span>{{ formatPhone(pet.tutor.phone) }}</span>
                </div>
              }
              @if (pet.tutor.email) {
                <div class="owner-contact">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                  </svg>
                  <span>{{ pet.tutor.email }}</span>
                </div>
              }
            </div>
          </div>
        }

        <!-- Statistics -->
        <div class="info-section">
          <h3>Estatísticas</h3>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
              </div>
              <div class="stat-content">
                <span class="stat-value">{{ pet._count?.appointments || 0 }}</span>
                <span class="stat-label">Consultas</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14,2 14,8 20,8"/>
                  <line x1="16" y1="13" x2="8" y2="13"/>
                  <line x1="16" y1="17" x2="8" y2="17"/>
                  <polyline points="10,9 9,9 8,9"/>
                </svg>
              </div>
              <div class="stat-content">
                <span class="stat-value">{{ pet._count?.medicalRecords || 0 }}</span>
                <span class="stat-label">Prontuários</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Dates -->
        <div class="info-section">
          <h3>Datas</h3>
          <div class="info-list">
            <div class="info-item">
              <span class="label">Cadastrado em:</span>
              <span class="value">{{ pet.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
            <div class="info-item">
              <span class="label">Última atualização:</span>
              <span class="value">{{ pet.updatedAt | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="onClose()">
        Fechar
      </button>
      <button class="btn-secondary" (click)="onManageStatus()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M2 12h20"/>
          <circle cx="12" cy="12" r="10"/>
        </svg>
        Gerenciar Status
      </button>
      <button class="btn-primary" (click)="onEdit()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
          <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
        </svg>
        Editar Pet
      </button>
    </div>
  </div>
</div>


